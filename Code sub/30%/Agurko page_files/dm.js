/*! dm-script - 1.3.4 - Wed Sep 09 2020 15:41:54 GMT+0000 (Coordinated Universal Time) */!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.attachEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!0):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},e.genGuid=function(){return[r(2),r(1),r(1),r(1),r(3)].join("-")},e.loadScriptInDom=function(e,t,i){var n=e.createElement("script");n.async=Boolean(i),n.type="text/javascript",n.src=t,(e.head||e.body||e.documentElement).appendChild(n)},e.getVisibilityTime=function(e){return e?(n=~~((t=e/1e3)%3600/60),o="",(i=~~(t/3600))>0&&(o+=i+":"+(n<10?"0":"")),o+=(n<10?"0"+n:n)+":"+((r=~~t%60)<10?"0":""),o+=""+r):"00:00";var t,i,n,r,o},e}();function r(e){var t,i;for(t="",i=0;0<=e?i<=e:i>=e;0<=e?++i:--i)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}t.Utils=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment={production:!0,debug:!1,cdn_url:"https://tag.durationmedia.net",server_url:"https://dmbe.durationmedia.net",visibilityThresholdPct:50,visibilityThresholdMs:0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SCRIPT_LOADED="SCRIPT_LOADED",e.SLOT_DETECTED="SLOT_DETECTED",e.SLOT_SPONSORSHIP_CHECK="SLOT_SPONSORSHIP_CHECK",e.SLOT_OVERTAKE_ELIGIBLE="SLOT_OVERTAKE_ELIGIBLE",e.SLOT_OVERTAKE_FAILED_NO_UNIT="SLOT_OVERTAKE_FAILED_NO_UNIT",e.SLOT_OVERTAKE_FAILED_SPONSORED="SLOT_OVERTAKE_FAILED_SPONSORED",e.SLOT_OVERTAKE_FAILED_GPT_BLACKLISTED="SLOT_OVERTAKE_FAILED_GPT_BLACKLISTED",e.SLOT_OVERTAKE_FAILED_DIV_BLACKLISTED="SLOT_OVERTAKE_FAILED_DIV_BLACKLISTED",e.SLOT_OVERTAKE="SLOT_OVERTAKE",e.UNIT_AD_REQUEST="UNIT_AD_REQUEST",e.UNIT_BID_RECEIVED="UNIT_BID_RECEIVED",e.UNIT_CREATIVE_RENDERED="UNIT_CREATIVE_RENDERED",e.UNIT_CREATIVE_VIEWABLE="UNIT_CREATIVE_VIEWABLE",e.UNIT_NO_FILL="UNIT_NO_FILL",e.UNIT_NO_BIDS="UNIT_NO_BIDS",e.UNIT_SEQ="UNIT_SEQ",e.SERVER_ERROR="SERVER_ERROR",e.DEBUG="DEBUG"}(t.LogEvent||(t.LogEvent={}));var n=function(){function e(){}return e.fromSlotDetails=function(t){var i=new e;return i.adWidth=t.size.width,i.adHeight=t.size.height,i.lid=t.lid,i.slotId=t.elementId,i},e.fromUnitContext=function(t,i){var n=new e;return n.slotId=t.rootGptDivId,n.adWidth=t.unitConfig.ad_width,n.adHeight=t.unitConfig.ad_height,n.unitId=t.unitConfig.placement_id,i&&Object.assign(n,i),n},e}();t.LogEventContext=n,t.LogEventLabels={SCRIPT_LOADED:"Script Loaded",SLOT_DETECTED:"Slot Detected",SLOT_SPONSORSHIP_CHECK:"Sponsorship Check",SLOT_OVERTAKE_ELIGIBLE:"Slot Eligible",SLOT_OVERTAKE_FAILED_NO_UNIT:"Size not supported",SLOT_OVERTAKE_FAILED_SPONSORED:"Slot Sponsored",SLOT_OVERTAKE:"Slot Overtake",UNIT_AD_REQUEST:"Ad Request",UNIT_BID_RECEIVED:"Bid Received",UNIT_CREATIVE_RENDERED:"Creative Rendered",UNIT_CREATIVE_VIEWABLE:"Creative Viewable",UNIT_NO_FILL:"No Fill",UNIT_NO_BIDS:"No Bids (prebid auction)",UNIT_SEQ:"sequence",SERVER_ERROR:"Server Error",DEBUG:"Debug"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),r=function(){function e(){}return e.getVisibility=function(e,t){var i=this.getElementCoordinates(e,t);return i&&this.isRectVisible(i.w,i.h)?this.intersectWithViewport(i.x,i.y,i.w,i.h,e):null},e.getElementCoordinates=function(e,t){var i=e.defaultView.getComputedStyle(t);if("visible"!==i.visibility)return null;var n=t.getBoundingClientRect();if(!this.isRectVisible(n.width,n.height))return null;parseFloat(i.paddingLeft),parseFloat(i.paddingTop),parseFloat(i.paddingBottom),parseFloat(i.paddingRight),parseFloat(i.borderLeftWidth),parseFloat(i.borderTopWidth);var r=t.clientWidth,o=t.clientHeight;return{x:n.left,y:n.top,w:r,h:o}},e.isRectVisible=function(e,t){return e>0||t>0},e.intersectWithViewport=function(e,t,i,r,o){var s=o.documentElement.clientWidth,l=Math.max(o.documentElement.clientHeight,window.innerHeight||0),c=Math.max(0,e),a=Math.max(0,t),d=Math.min(s,e+i)-c,u=Math.min(l,t+r)-a,h=d>=0&&u>=0;return h?n.Visibility.from(h,d*u*100/(i*r)):new n.Visibility},e}();t.VisibilityUtils=r},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.from=function(t,i){var n=new e;return n.visible=t,n.percentVisible=i,n},e}();t.Visibility=o;var s=function(e){function t(){var t=e.call(this)||this;return t.duration=0,t.visibleByThresholdDuration=0,t.visibleDuration=0,t.detectedAt=(new Date).getTime(),t}return r(t,e),t.fromVisibility=function(e,i){var n=new t;return Object.assign(n,{id:e},i),n.timestamp=(new Date).getTime(),n},t.invisible=function(e){return this.fromVisibility(e,o.from(!1,0))},t}(o);t.VisibilityDetails=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),r=i(7);setTimeout((function(){new o(window,n.ScriptConfigRon.parse()).init()}));var o=function(){function e(e,t){this.wnd=e,this.config=t,this.log=r.Logger.getInstance(e),this.log.debug("config %o",t)}return e.prototype.init=function(){var e=this.wnd.location.hostname;e=e.replace("www.",""),this.log.debug("hostname: "+e);var t=this.config.sites.find((function(t){return t.url===e}));t?this.injectSiteScript(t):this.log.debug("site "+e+" not configured")},e.prototype.injectSiteScript=function(e){this.log.debug("injecting script: "+JSON.stringify(e));var t=document.createElement("script");t.id="dm-"+e.id,t.setAttribute("src","https://tag.durationmedia.net/sites/"+e.id+"/dm.js"),this.wnd.document.body.appendChild(t)},e}();t.RonScript=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.parse=function(){return{publisherId:"1000032",sites:[{url:"advocate-news.com",id:"10543"},{url:"akronnewsreporter.com",id:"10536"},{url:"bostonherald.com",id:"10479"},{url:"broomfieldenterprise.com",id:"10523"},{url:"brushnewstribune.com",id:"10537"},{url:"buckslocalnews.com",id:"10516"},{url:"buffzone.com",id:"10515"},{url:"burlington-record.com",id:"10544"},{url:"canoncitydailyrecord.com",id:"10506"},{url:"chicoer.com",id:"10505"},{url:"coloradodaily.com",id:"10524"},{url:"coloradohometownweekly.com",id:"10525"},{url:"dailybreeze.com",id:"10485"},{url:"dailybulletin.com",id:"10494"},{url:"dailycamera.com",id:"10486"},{url:"dailydemocrat.com",id:"10510"},{url:"dailyfreeman.com",id:"10490"},{url:"dailynews.com",id:"10482"},{url:"delcotimes.com",id:"10496"},{url:"denverpost.com",id:"10475"},{url:"eastbaytimes.com",id:"10481"},{url:"eptrail.com",id:"10513"},{url:"excelsiorcalifornia.com",id:"10528"},{url:"fortmorgantimes.com",id:"10514"},{url:"gazettes.com",id:"10539"},{url:"goanddomichigan.com",id:"10549"},{url:"journal-advocate.com",id:"10545"},{url:"lamarledger.com",id:"10530"},{url:"lowellsun.com",id:"10488"},{url:"macombdaily.com",id:"10498"},{url:"mainlinemedianews.com",id:"10527"},{url:"marinij.com",id:"10484"},{url:"mendocinobeacon.com",id:"10538"},{url:"mercurynews.com",id:"10473"},{url:"miprepzone.com",id:"10548"},{url:"montereyherald.com",id:"10508"},{url:"morningjournal.com",id:"10501"},{url:"nashobavalleyvoice.com",id:"10533"},{url:"news-herald.com",id:"10546"},{url:"ocregister.com",id:"10474"},{url:"orovillemr.com",id:"10531"},{url:"paradisepost.com",id:"10529"},{url:"pasadenastarnews.com",id:"10495"},{url:"pe.com",id:"10480"},{url:"presstelegram.com",id:"10492"},{url:"pvnews.com",id:"10540"},{url:"record-bee.com",id:"10551"},{url:"redbluffdailynews.com",id:"10522"},{url:"redlandsdailyfacts.com",id:"10509"},{url:"redwoodtimes.com",id:"10534"},{url:"reporterherald.com",id:"10500"},{url:"santacruzsentinel.com",id:"10489"},{url:"sbsun.com",id:"10487"},{url:"sentinelandenterprise.com",id:"10507"},{url:"sgvtribune.com",id:"10493"},{url:"silliconvalley.com",id:"10552"},{url:"southjerseylocalnews.com",id:"10532"},{url:"sunmediacareers.com",id:"10553"},{url:"tbrnews.com",id:"10542"},{url:"thecannifornian.com",id:"10541"},{url:"thenewsherald.com",id:"10499"},{url:"theoaklandpress.com",id:"10497"},{url:"thereporter.com",id:"10512"},{url:"thevalleydispatch.com",id:"10535"},{url:"times-standard.com",id:"10550"},{url:"timescall.com",id:"10502"},{url:"timesheraldonline.com",id:"10503"},{url:"trentonian.com",id:"10491"},{url:"twincities.com",id:"10483"},{url:"ukiahdailyjournal.com",id:"10511"},{url:"whatdoyouwannado.com",id:"10547"},{url:"whittierdailynews.com",id:"10504"},{url:"willitsnews.com",id:"10526"}]}},e}();t.ScriptConfigRon=n;var r=function(){};t.RonSite=r},function(e,t,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)n[r]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=i(8),s=i(10),l=i(2),c=function(){function e(){}return e.getInstance=function(t){var i=(t=t||window).dm_logger;return i||((i=new e).wnd=t,t.dm_logger=i),i.enabled=this.isConsoleDebug(t),this.isFullDebug(t)&&!i.loggerScreen&&(i.loggerScreen=new s.LoggerScreen(t)),i.server=new o.ServerService,i},e.isFullDebug=function(e){return r.environment.debug||-1!==e.location.href.indexOf("dm_debug")},e.isConsoleDebug=function(e){return r.environment.debug||-1!==e.location.href.indexOf("dmjs_debug")||this.isFullDebug(e)},e.prototype.error=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.enabled&&console.error.apply(console,n(["dm:: error "+e],t))},e.prototype.debug=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.enabled&&console.log.apply(console,n(["dm:: "+e],t))},e.prototype.event=function(e,t,i){if(e===l.LogEvent.SCRIPT_LOADED&&this.server.scriptLoaded(t.siteId),this.debug("%c"+e+" %c"+(t?":: "+JSON.stringify(t):"")+" "+(i?":: "+i:""),"color: blue","color: black"),this.loggerScreen)try{this.loggerScreen.onLogEvent(e,t)}catch(e){}},e}();t.Logger=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),r=i(1),o=function(){function e(){this.url=r.environment.server_url}return e.prototype.checkSlots=function(e){return n.post(this.url+"/sponsorships",e).then((function(e){return e.parsedBody}))},e.prototype.scriptLoaded=function(e){n.get(this.url+"/scriptloaded?siteId="+e).then((function(e){return{}})).catch((function(e){return{}}))},e.prototype.logBulk=function(e,t,i){n.get(this.url+"/lb?s="+e+"&t="+t+(i?"&c="+i:"")).then((function(e){return{}})).catch((function(e){return{}}))},e.prototype.logAuction=function(e){n.post(this.url+"/la",e).then((function(e){return{}})).catch((function(e){return{}}))},e}();t.ServerService=o,function(e){e.SL="SL",e.SD="SD"}(t.ScriptLogType||(t.ScriptLogType={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,l)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.http=function(e){return new Promise((function(t,i){var n;fetch(e).then((function(e){return n=e,e.json()})).then((function(e){n.ok?(n.parsedBody=e,t(n)):i(n)})).catch((function(e){i(e)}))}))},t.get=function(e,i){return void 0===i&&(i={method:"get"}),n(void 0,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,t.http(new Request(e,i))];case 1:return[2,n.sent()]}}))}))},t.post=function(e,i,o){return void 0===o&&(o={method:"post",body:JSON.stringify(i)}),n(void 0,void 0,void 0,(function(){var i;return r(this,(function(n){switch(n.label){case 0:return(i=new Request(e,o)).headers.set("Content-Type","application/json"),[4,t.http(i)];case 1:return[2,n.sent()]}}))}))},t.put=function(e,i,o){return void 0===o&&(o={method:"put",body:JSON.stringify(i)}),n(void 0,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,t.http(new Request(e,o))];case 1:return[2,i.sent()]}}))}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),r=i(0),o=i(12),s=i(2),l=i(13),c=i(14),a=function(){function e(e){this.wnd=e,this.slotIdMap={},this.loggerView=new o.LoggerConsole(e),this.loggerTracker=new n.LoggerTracker(e),this.loggerView.createLoggerContainer(),this.visibilityMonitor=new l.VisibilityMonitorService(c.VisibilityService.of(e),10)}return e.prototype.visibilityUpdate=function(e,t){this.loggerTracker.visibilityUpdate(e,t,this.slotIdMap[e])},e.prototype.onLogEvent=function(e,t){switch(this.loggerView.createLoggerContainer(),t.slotId&&this.addSlotIdToMap(t.slotId),e){case s.LogEvent.SLOT_OVERTAKE_FAILED_NO_UNIT:case s.LogEvent.SLOT_OVERTAKE_FAILED_SPONSORED:this.loggerTracker.clear(t.slotId),this.visibilityMonitor.unwatch([t.slotId])}this.loggerView.writeLoggerMsg(this.getTimeMessage(),e,t,this.slotIdMap[t.slotId])},e.prototype.addSlotIdToMap=function(e){var t=this;e&&!this.slotIdMap[e]&&(this.slotIdMap[e]="#"+(Object.keys(this.slotIdMap).length+1),this.visibilityMonitor.watch([e],(function(e,i){return t.visibilityUpdate(e,i)})))},e.prototype.getTimeMessage=function(){var e=!(null!=this.startTime);return this.startTime||(this.startTime=(new Date).getTime()),e?"00:00":r.Utils.getVisibilityTime((new Date).getTime()-this.startTime)},e}();t.LoggerScreen=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),r=i(0),o=function(){function e(e){this.wnd=e}return e.prototype.visibilityUpdate=function(e,t,i){var n=this.wnd.document,o=this.getVisibilityTracker(n,e,t);o&&(o.innerHTML=i+"<br/> t="+r.Utils.getVisibilityTime((new Date).getTime()-t.detectedAt)+"<br/>\n    vt="+r.Utils.getVisibilityTime(t.visibleByThresholdDuration)+"<br/>\n    p="+(t.percentVisible?Math.floor(t.percentVisible)+"%":""))},e.prototype.getVisibilityTracker=function(e,t,i){var r=e.getElementById(t);if(r){var o=n.VisibilityUtils.getElementCoordinates(e,r);if(!o)return null;var s=this.getTrackerEl(e,t);s.style.top=o.y+3+"px",s.style.left=o.x+3+"px",s.style.width="100px",s.style.height="84px",s.style.background=i.visibleByThreshold?"#18F624":"grey",s.style.color=i.visibleByThreshold?"black":"white";var l=this.getTrackerElContainer(e,t);return l.style.top=o.y+"px",l.style.left=o.x+"px",l.style.width=o.w+"px",l.style.height=o.h+"px",l.style.border="3px dashed "+(i.visibleByThreshold?"#30F73A":"grey"),s}},e.prototype.getTrackerElContainer=function(e,t){var i="dm-vis-tracker-"+t,n=i+"-container",r=e.getElementById(n);return r||((r=e.createElement("div")).id=i+"-container",r.className="dm-vis-tracker-container",r.style.position="fixed",r.style.zIndex="999",e.body.appendChild(r)),r},e.prototype.getTrackerEl=function(e,t){var i="dm-vis-tracker-"+t,n=e.getElementById(i);if(!n){if(!e.getElementById("dm-style")){var r=e.createElement("style");r.id="dm-style",r.innerHTML=".dm-vis-tracker{\n          opacity: 0.9;\n          border: 1px solid #5077E3;\n          line-height: 19px;\n          padding: 0 10px;\n          font-size: 14px;\n        }",e.getElementsByTagName("head")[0].appendChild(r)}(n=e.createElement("div")).id=i,n.className="dm-vis-tracker",n.style.position="fixed",n.style.zIndex="1000",e.body.appendChild(n)}return n},e.prototype.clear=function(e){var t=this.wnd.document;t.body.removeChild(this.getTrackerEl(t,e)),t.body.removeChild(this.getTrackerElContainer(t,e))},e}();t.LoggerTracker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=i(0),o=function(){function e(e){this.wnd=e}return e.prototype.createLoggerContainer=function(){if(this.wnd.document&&this.wnd.document.body&&!this.wnd.document.getElementById("dm-logger-container")){var e=this.wnd.document.createElement("div");e.id="dm-logger-container",e.setAttribute("style","-webkit-box-shadow: 0 5px 11px 0 rgba(0,0,0,0.18), 0 4px 15px 0 rgba(0,0,0,0.15);box-shadow: 0 5px 11px 0 rgba(0,0,0,0.18), 0 4px 15px 0 rgba(0,0,0,0.15);"),e.style.width="290px",e.style.height="350px",e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.overflowWrap="break-word",e.style.fontSize="12px",e.style.textAlign="left",e.style.zIndex="2147483647",e.style.overflowX="hidden",e.style.borderRadius="5px",this.wnd.document.body.appendChild(e);var t=this.wnd.document.createElement("div");t.id="dm-logger-container-header",t.style.width="290px",t.style.height="35px",t.style.background="#e3931e",t.style.color="#ffffff",t.style.padding="7px",t.style.fontSize="14px",t.style.position="fixed",t.style.borderRadius="5px 5px 0 0",t.style.boxSizing="border-box",t.innerHTML="<span>Duration Media</span>",e.appendChild(t),this.screenContainerBody=this.wnd.document.createElement("div"),this.screenContainerBody.id="dm-logger-container-body",this.screenContainerBody.style.width="100%",this.screenContainerBody.style.height="313px",this.screenContainerBody.style.marginTop="35px",this.screenContainerBody.style.overflowY="scroll",this.screenContainerBody.style.background="rgba(245, 245, 245, .9)",e.appendChild(this.screenContainerBody),this.screenContainerList=this.wnd.document.createElement("ul"),this.screenContainerList.id="dm-logger-container-list",this.screenContainerList.style.listStyleType="none",this.screenContainerList.style.margin="0",this.screenContainerList.style.padding="0",this.screenContainerBody.appendChild(this.screenContainerList)}},e.prototype.writeLoggerMsg=function(e,t,i,o){if(t!==n.LogEvent.UNIT_SEQ&&this.screenContainerList){var s=this.wnd.document.createElement("li");s.style.padding="5px",s.style.fontSize="12px",s.style.lineHeight="normal",s.style.backgroundColor=this.screenContainerList.getElementsByTagName("li").length%2==0?"none":"rgba(255, 255, 255, .8)";var l=i.slotId?o+" ":"",c=i.adWidth&&i.adHeight?i.adWidth+"x"+i.adHeight+" ":"",a=t==n.LogEvent.UNIT_NO_FILL?"#cc0606":t==n.LogEvent.UNIT_CREATIVE_RENDERED?"#008000":"#043f76",d=n.LogEventLabels[t]||t,u=(n.LogEvent.UNIT_NO_FILL||n.LogEvent.UNIT_CREATIVE_RENDERED)&&i.seq?" <span>"+i.seq+"</span>":"",h=this.getMoreInfo(i),p=r.Utils.genGuid(),f='<span style="color: '+a+'; cursor: pointer;" onclick="(function () {document.getElementById(\''+p+"').style.display = document.getElementById('"+p+"').style.display ==='block'?'none':'block';})();\n                        return false\"> "+d+" "+u+'</span>\n                      <span id="'+p+'" style="display: none">'+(h||"")+"</span>";s.innerHTML=e+" <strong>"+l+"</strong> <span>"+c+"</span> "+f,this.screenContainerList.appendChild(s),this.screenContainerBody.scrollTo(0,this.screenContainerBody.scrollHeight)}},e.prototype.getMoreInfo=function(e){var t=e.crId?"<strong>crId: </strong>"+e.crId:"",i=e.lid?"<strong>lid: </strong>"+e.lid:"",n=e.bidder?"<strong>bidder: </strong>"+e.bidder:"",r=e.cpm?"<strong>cpm: </strong>"+e.cpm:"",o=e.seq?"<strong>seq: </strong>"+e.seq:"",s=e.version?"<strong>version: </strong>"+e.version:"";return t||i||o||n||r||s?t+" "+i+" "+o+" "+n+" "+r+" "+s:null},e}();t.LoggerConsole=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.service=e,this.intervalMs=t,this.containerIdsToMonitor=[]}return e.prototype.watch=function(e,t){var i=this;this.containerIdsToMonitor=this.containerIdsToMonitor.concat(e),this.interval||(this.interval=setInterval((function(){i.containerIdsToMonitor.forEach((function(e){var n=i.service.calc(e);t(e,n)}))}),this.intervalMs))},e.prototype.unwatch=function(e){this.containerIdsToMonitor=this.containerIdsToMonitor.filter((function(t){return!e.includes(t)})),e.length||clearInterval(this.interval)},e.prototype.stopMonitoring=function(){null!=this.interval&&clearInterval(this.interval)},e}();t.VisibilityMonitorService=n;var r=function(){function e(){}return e.dispatchEvent=function(t,i){var n;"function"==typeof Event?n=new CustomEvent(e.EVENT_VISIBILTY_CHANGE,i):(n=t.createEvent("CustomEvent")).initCustomEvent(e.EVENT_VISIBILTY_CHANGE,!1,!0,i),t.dispatchEvent(n)},e.EVENT_VISIBILTY_CHANGE="visibility-change",e}();t.VisibilityEventDispatcher=r;var o=function(e){this.detail=e};t.VisibilityChangedEvent=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),r=i(4),o=i(0),s=i(1),l=function(){function e(e,t,i){var n=this;void 0===t&&(t=0),void 0===i&&(i=0),this.lastStateMap=new Map,this.requiredVisibilityPercentage=t,this.doc=e.document,this.windowDocumentIsFocused=!0,o.Utils.attachEvent(e,"visibilitychange",(function(){return n.windowDocumentIsFocused=!e.document.hidden})),this.requiredVisibilityMs=i}return e.of=function(t){return new e(t,s.environment.visibilityThresholdPct,s.environment.visibilityThresholdMs)},e.prototype.calc=function(e){var t=this.getLastKnownVisibility(e),i=this.getCurrentVisibility(e),n=i.timestamp-t.timestamp;return i.visible&&(i.duration=t.duration+n),i.visibleByThreshold=i.percentVisible>this.requiredVisibilityPercentage&&i.duration>this.requiredVisibilityMs,i.visibleByThresholdDuration=t.visibleByThresholdDuration,i.visibleDuration=t.visibleDuration,i.visibleByThreshold&&(i.visibleByThresholdDuration+=n),i.visible&&(i.visibleDuration+=n),t.visibleByThreshold&&!i.visibleByThreshold&&(i.changedInvisibleByThreshold=!0),!t.visibleByThreshold&&i.visibleByThreshold&&(i.changedVisibleByThreshold=!0),i.detectedAt=t.detectedAt,this.lastStateMap.set(e,i),i},e.prototype.getLastKnownVisibility=function(e){return this.lastStateMap.get(e)||r.VisibilityDetails.invisible(e)},e.prototype.getCurrentVisibility=function(e){var t,i=this.doc.getElementById(e);return null==i?r.VisibilityDetails.invisible(e):((t=this.windowDocumentIsFocused?r.VisibilityDetails.fromVisibility(e,n.VisibilityUtils.getVisibility(this.doc,i)):r.VisibilityDetails.invisible(e)).timestamp=(new Date).getTime(),t)},e}();t.VisibilityService=l}]);